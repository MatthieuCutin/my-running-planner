services:
    resource.race:
        parent:    "api.resource"
        arguments: [ 'ACSEO\Bundle\MyRunningPlannerBundle\Entity\Race' ]
        calls:
            -      method:    "initNormalizationContext"
                   arguments: [ { groups: [ "race_read" ] } ]
            -      method:    "initDenormalizationContext"
                   arguments: [ { groups: [ "race_write" ] } ]
            -      method:    "initItemOperations"
                   arguments:
                       -
                           - "@resource.race.item_operation.get"
                           - "@resource.race.item_operation.put"
                           - "@resource.race.item_operation.delete"
                           - "@resource.race.item_operation.get_next_race"
        tags:      [ { name: "api.resource" } ]

    resource.race.item_operation.get:
        class:     "Dunglas\ApiBundle\Api\Operation\Operation"
        public:    false
        factory:   [ "@api.operation_factory", "createItemOperation" ]
        arguments:
            - "@resource.race"
            - "GET"
            - "/races/{id}"
            - "ACSEOMyRunningPlannerBundle:Race:get"
            - "api_races_get"
            -    # Context (will be present in Hydra documentation)
                 "@type":       "hydra:Operation"
                 "hydra:title": "Get race"
                 "returns":     "xmls:string"

    resource.race.item_operation.get_next_race:
        class:     "Dunglas\ApiBundle\Api\Operation\Operation"
        public:    false
        factory:   [ "@api.operation_factory", "createItemOperation" ]
        arguments:
            - "@resource.race"
            - "GET"
            - "/races/next/{date}"
            - "ACSEOMyRunningPlannerBundle:Race:getNextRace"
            - "api_races_get_next_race"
            -    # Context (will be present in Hydra documentation)
                 "@type":       "hydra:Operation"
                 "hydra:title": "Get next race"
                 "returns":     "xmls:string"

    resource.race.item_operation.delete:
        class:     "Dunglas\ApiBundle\Api\Operation\Operation"
        public:    false
        factory:   [ "@api.operation_factory", "createItemOperation" ]
        arguments: [ "@resource.race", "DELETE" ]

    resource.race.item_operation.put:
        class:     "Dunglas\ApiBundle\Api\Operation\Operation"
        public:    false
        factory:   [ "@api.operation_factory", "createItemOperation" ]
        arguments: [ "@resource.race", "PUT" ]
